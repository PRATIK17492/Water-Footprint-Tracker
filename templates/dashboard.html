<!DOCTYPE html>
<html>
<head>
    <title>Dashboard - Water Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial; background: linear-gradient(#e0f7ff, #ffffff); text-align:center; }
        h1 { color:#0077cc; }
        canvas { background:white; border-radius:15px; padding:20px; box-shadow:0 0 15px #ccc; margin-top:20px; }
        .badge { display:inline-block; padding:8px 15px; margin:5px; border-radius:10px; background:#0077cc; color:white; }
        .card { display:inline-block; background:white; padding:20px; margin:10px; border-radius:15px; box-shadow:0 0 15px #ccc; width:250px; vertical-align:top; }
    </style>
</head>
<body>
<h1>üíß Water Tracker Dashboard</h1>

<div class="card">
<h3>üíß Total Usage</h3>
<p>{{ "%.1f"|format(total) }} Litres</p>
</div>

<div class="card">
<h3>üèÖ Badges</h3>
{% for badge in badges %}
<div class="badge">{{ badge }}</div>
{% endfor %}
</div>

<div class="card">
<h3>üåç Community Avg</h3>
<p>{{ community_avg }} Litres</p>
</div>

<div>
<canvas id="chart" width="600" height="400"></canvas>
</div>

<div class="card">
<h3>‚ùì Mini Quiz</h3>
<p>{{ quiz.q }}</p>
<p><b>Answer:</b> {{ quiz.a }}</p>
</div>

<a href="{{ url_for('index') }}"><button style="margin-top:20px; padding:10px 25px; background:#0077cc; color:white; border:none; border-radius:8px;">Go Back</button></a>

<script>
const ctx = document.getElementById('chart').getContext('2d');
const chart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: {{ labels|tojson }},
        datasets: [{
            label: 'Water Used (L)',
            data: {{ values|tojson }},
            backgroundColor: 'rgba(0, 119, 204, 0.7)',
            borderColor: 'rgba(0, 119, 204,1)',
            borderWidth: 1
        }]
    },
    options: {
        responsive:true,
        plugins: {
            legend: { display:false },
            title: { display:true, text:'Water Usage by Activity' }
        },
        scales: { y: { beginAtZero:true } }
    }
});
</script>
</body>
</html>
